#!/bin/sh

PACKAGE=org.webosinternals.securesearch

# Handle execution as pmPostInstall.script
if [ -z "$IPKG_OFFLINE_ROOT" ]; then
    IPKG_OFFLINE_ROOT=/media/cryptofs/apps
    mount -o remount,rw /
fi

# Set new options via luna-send
luna-send -n 1 palm://com.palm.systemservice/setPreferences '{"webSearchList":{"en_us":[{"id":"google","title":"Google","weburl":"http:\/\/www.google.com\/m\/search?client=ms-palm-webOS&pws=0&safe=off&hl=en&channel=bm&q=#{query}"},{"id":"gsecure","title":"Google Secure","weburl":"https:\/\/www.google.com\/m\/search?client=ms-palm-webOS&pws=0&safe=off&hl=en&channel=bm&q=#{query}"},{"id":"duckduckgo","title":"DuckDuckGo Secure","weburl":"https:\/\/duckduckgo.com\\/?q=#{query}"},{"id":"wikipedia","title":"Wikipedia","weburl":"http:\/\/en.m.wikipedia.org\/wiki\/Special:Search?search=#{query}"}],"en_mx":[{"id":"google","title":"Google","weburl":"http:\/\/www.google.com\/m\/search?client=ms-palm-webOS&pws=0&safe=off&hl=en&channel=bm&q=#{query}"},{"id":"gsecure","title":"Google Secure","weburl":"https:\/\/www.google.com\/m\/search?client=ms-palm-webOS&pws=0&safe=off&hl=en&channel=bm&q=#{query}"},{"id":"wikipedia","title":"Wikipedia","weburl":"http:\/\/en.m.wikipedia.org\/wiki\/Special:Search?search=#{query}"}],"es_us":[{"id":"google","title":"Google","weburl":"http:\/\/www.google.com\/m\/search?client=ms-palm-webOS&pws=0&safe=off&hl=es&channel=bm&q=#{query}"},{"id":"gsecure","title":"Google Secure","weburl":"https:\/\/www.google.com\/m\/search?client=ms-palm-webOS&pws=0&safe=off&hl=es&channel=bm&q=#{query}"},{"id":"wikipedia","title":"Wikipedia","weburl":"http:\/\/es.wikipedia.org\/wiki\/Especial:Buscar?hl=es&amp;search=#{query}"}],"es_es":[{"id":"google","title":"Google","weburl":"http:\/\/www.google.com\/m\/search?client=ms-palm-webOS&pws=0&safe=off&hl=es&channel=bm&q=#{query}"},{"id":"gsecure","title":"Google Secure","weburl":"https:\/\/www.google.com\/m\/search?client=ms-palm-webOS&pws=0&safe=off&hl=es&channel=bm&q=#{query}"},{"id":"wikipedia","title":"Wikipedia","weburl":"http:\/\/es.wikipedia.org\/wiki\/Especial:Buscar?hl=es&amp;search=#{query}"}],"es_mx":[{"id":"google","title":"Google","weburl":"http:\/\/www.google.com\/m\/search?client=ms-palm-webOS&pws=0&safe=off&hl=es&channel=bm&q=#{query}"},{"id":"gsecure","title":"Google Secure","weburl":"https:\/\/www.google.com\/m\/search?client=ms-palm-webOS&pws=0&safe=off&hl=es&channel=bm&q=#{query}"},{"id":"wikipedia","title":"Wikipedia","weburl":"http:\/\/es.wikipedia.org\/wiki\/Especial:Buscar?hl=es&amp;search=#{query}"}],"en_ca":[{"id":"google","title":"Google","weburl":"http:\/\/www.google.com\/m\/search?client=ms-palm-webOS&pws=0&safe=off&hl=en&channel=bm&q=#{query}"},{"id":"gsecure","title":"Google Secure","weburl":"https:\/\/www.google.com\/m\/search?client=ms-palm-webOS&pws=0&safe=off&hl=en&channel=bm&q=#{query}"},{"id":"wikipedia","title":"Wikipedia","weburl":"http:\/\/en.m.wikipedia.org\/wiki\/Special:Search?search=#{query}"}],"en_gb":[{"id":"google","title":"Google","weburl":"http:\/\/www.google.com\/m\/search?client=ms-palm-webOS&pws=0&safe=off&hl=en&channel=bm&q=#{query}"},{"id":"gsecure","title":"Google Secure","weburl":"https:\/\/www.google.com\/m\/search?client=ms-palm-webOS&pws=0&safe=off&hl=en&channel=bm&q=#{query}"},{"id":"wikipedia","title":"Wikipedia","weburl":"http:\/\/en.m.wikipedia.org\/wiki\/Special:Search?search=#{query}"}],"en_ie":[{"id":"google","title":"Google","weburl":"http:\/\/www.google.com\/m\/search?client=ms-palm-webOS&pws=0&safe=off&hl=en&channel=bm&q=#{query}"},{"id":"gsecure","title":"Google Secure","weburl":"https:\/\/www.google.com\/m\/search?client=ms-palm-webOS&pws=0&safe=off&hl=en&channel=bm&q=#{query}"},{"id":"wikipedia","title":"Wikipedia","weburl":"http:\/\/en.m.wikipedia.org\/wiki\/Special:Search?search=#{query}"}],"fr_ca":[{"id":"google","title":"Google","weburl":"http:\/\/www.google.com\/m\/search?client=ms-palm-webOS&pws=0&safe=off&hl=fr&channel=bm&q=#{query}"},{"id":"gsecure","title":"Google Secure","weburl":"https:\/\/www.google.com\/m\/search?client=ms-palm-webOS&pws=0&safe=off&hl=fr&channel=bm&q=#{query}"},{"id":"wikipedia","title":"Wikipedia","weburl":"http:\/\/fr.wikipedia.org\/wiki\/Sp%C3%A9cial:Recherche?hl=fr&amp;search=#{query}"}],"fr_fr":[{"id":"google","title":"Google","weburl":"http:\/\/www.google.com\/m\/search?client=ms-palm-webOS&pws=0&safe=off&hl=fr&channel=bm&q=#{query}"},{"id":"gsecure","title":"Google Secure","weburl":"https:\/\/www.google.com\/m\/search?client=ms-palm-webOS&pws=0&safe=off&hl=fr&channel=bm&q=#{query}"},{"id":"wikipedia","title":"Wikipedia","weburl":"http:\/\/fr.wikipedia.org\/wiki\/Sp%C3%A9cial:Recherche?hl=fr&amp;search=#{query}"}],"it_it":[{"id":"google","title":"Google","weburl":"http:\/\/www.google.com\/m\/search?client=ms-palm-webOS&pws=0&safe=off&hl=it&channel=bm&q=#{query}"},{"id":"gsecure","title":"Google Secure","weburl":"https:\/\/www.google.com\/m\/search?client=ms-palm-webOS&pws=0&safe=off&hl=it&channel=bm&q=#{query}"},{"id":"wikipedia","title":"Wikipedia","weburl":"http:\/\/it.wikipedia.org\/wiki\/Speciale:Ricerca?hl=it&amp;search=#{query}"}],"de_de":[{"id":"google","title":"Google","weburl":"http:\/\/www.google.com\/m\/search?client=ms-palm-webOS&pws=0&safe=off&hl=de&channel=bm&q=#{query}"},{"id":"gsecure","title":"Google Secure","weburl":"https:\/\/www.google.com\/m\/search?client=ms-palm-webOS&pws=0&safe=off&hl=de&channel=bm&q=#{query}"},{"id":"wikipedia","title":"Wikipedia","weburl":"http:\/\/de.m.wikipedia.org\/wiki\/Spezial:Suche?hl=de&amp;search=#{query}"}]}}'

#ipkg -o $IPKG_OFFLINE_ROOT remove $PACKAGE
exit 0
